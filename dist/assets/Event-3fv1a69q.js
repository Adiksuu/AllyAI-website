import{j as e,d as v,c as j,r as l}from"./index-BFltlDJr.js";import{t as i,S as f,_ as N,a as g}from"./Sidebar-eFX6kK0U.js";import{a as b}from"./_unlockTheme-DqE_uakg.js";import"./index-BtAHqjqB.js";const d="/assets/event-banner-CnWOk7un.png";function o({quests:s,eventTheme:a}){const n=()=>{s[0].completed>=s[0].required&&s[1].completed>=s[1].required&&s[2].completed>=s[2].required&&b()};return s!==void 0?e.jsxs("div",{className:"event-banner",children:[e.jsx("div",{className:"leftside",children:e.jsx("img",{src:d,alt:"event-banner",loading:"lazy"})}),e.jsxs("div",{className:"rightside",children:[e.jsxs("div",{className:"info",children:[e.jsx("h1",{children:"Welcome to the Event Page"}),e.jsxs("p",{children:["Complete the tasks below and claim ",e.jsx("span",{style:{color:`${a.color}`},children:a.name})," theme for free!"]})]}),e.jsx("div",{className:"buttons",children:e.jsx("button",{className:s[0].completed>=s[0].required&&s[1].completed>=s[1].required&&s[2].completed>=s[2].required?"":"locked",onClick:()=>n(),children:"Claim"})})]})]}):e.jsxs("div",{className:"event-banner",children:[e.jsx("div",{className:"leftside",children:e.jsx("img",{src:d,alt:"event-banner",loading:"lazy"})}),e.jsx("div",{className:"rightside",children:e.jsxs("div",{className:"info",children:[e.jsx("h1",{children:"Welcome to the Event Page"}),e.jsx("p",{children:"There are no any event yet!"})]})})]})}const m=[{text:"Leave feedback",required:1,defaultValue:0,completed:0},{text:"Use 20 ALLY-2 prompts",required:20,defaultValue:0,completed:0},{text:"Generate 2 ALLY-IMAGINE photos",required:2,defaultValue:0,completed:0}];function E({quests:s}){function a({quest:n,index:t}){return e.jsxs("div",{className:"quest",children:[e.jsxs("div",{className:"info",children:[e.jsx("p",{children:n.text}),e.jsxs("span",{children:[s[t].completed,"/",n.required]})]}),e.jsx("div",{className:"quest-stats",children:e.jsx("div",{className:"progressbar",children:e.jsx("div",{className:"progress",style:{width:`${s[t].completed/n.required*100}%`}})})})]})}return e.jsxs("div",{className:"event-quests",children:[e.jsx("div",{className:"top",children:e.jsx("h2",{children:"Event Quests"})}),e.jsx("div",{className:"quests",children:m.map((n,t)=>e.jsx(a,{quest:n,index:t},t))})]})}const L=async(s,a)=>{const t=(await v.ref(`users/${j.currentUser.uid}/`).once("value")).val();console.log(t.prompts["ALLY-2"]);const r=t.opinion?1:0,h=t.prompts["ALLY-2"],p=t.prompts["ALLY-IMAGINE"],u=s.map((c,x)=>{switch(x){case 0:return{...c,completed:r};case 1:return{...c,completed:h};case 2:return{...c,completed:p};default:return c}});a(u)};function y(){const[s,a]=l.useState(m),n=new Date().getTime(),t=i.find(r=>r.during&&r.ends>n);return l.useEffect(()=>{L(s,a)},[]),t?e.jsxs(e.Fragment,{children:[e.jsx(o,{quests:s,eventTheme:t}),e.jsx(E,{quests:s})]}):e.jsx(o,{quests:void 0})}function Q(){const[s,a]=l.useState(i[0]);return l.useEffect(()=>{(async()=>{const t=await N();a(g(t))})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("section",{className:"event",style:{"--theme-color":s.color,"--theme-rgba":s.border},children:e.jsx(y,{})})]})}export{Q as default};
